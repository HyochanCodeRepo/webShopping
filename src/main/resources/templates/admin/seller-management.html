<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      layout:decorate="~{layout/default}"
      lang="ko">
<head>
    <title>ÌåêÎß§Ïûê Ïã†Ï≤≠ Í¥ÄÎ¶¨</title>
    <th:block layout:fragment="css">
        <style>
            .management-container {
                max-width: 1400px;
                margin: 60px auto;
                padding: 0 20px;
            }
            
            .page-header {
                margin-bottom: 40px;
            }
            
            .page-title {
                font-size: 32px;
                font-weight: 700;
                color: #232f3e;
                margin-bottom: 10px;
            }
            
            .page-subtitle {
                font-size: 16px;
                color: #666;
            }
            
            /* ÏïåÎ¶º Î©îÏãúÏßÄ */
            .alert {
                padding: 15px 20px;
                border-radius: 8px;
                margin-bottom: 30px;
                font-size: 14px;
            }
            
            .alert-success {
                background: #d4edda;
                color: #155724;
                border: 1px solid #c3e6cb;
            }
            
            .alert-error {
                background: #f8d7da;
                color: #721c24;
                border: 1px solid #f5c6cb;
            }
            
            /* ÌÜµÍ≥Ñ Ïπ¥Îìú */
            .stats-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                gap: 20px;
                margin-bottom: 40px;
            }
            
            .stat-card {
                background: #fff;
                border-radius: 12px;
                padding: 25px;
                box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            }
            
            .stat-label {
                font-size: 14px;
                color: #666;
                margin-bottom: 10px;
            }
            
            .stat-value {
                font-size: 32px;
                font-weight: 700;
                color: #232f3e;
            }
            
            .stat-pending {
                color: #ff9900;
            }
            
            .stat-approved {
                color: #28a745;
            }
            
            .stat-rejected {
                color: #dc3545;
            }
            
            /* ÏÑπÏÖò */
            .section {
                background: #fff;
                border-radius: 12px;
                padding: 30px;
                box-shadow: 0 2px 8px rgba(0,0,0,0.08);
                margin-bottom: 30px;
            }
            
            .section-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 25px;
                padding-bottom: 15px;
                border-bottom: 2px solid #f0f0f0;
            }
            
            .section-title {
                font-size: 22px;
                font-weight: 700;
                color: #232f3e;
            }
            
            .section-count {
                font-size: 16px;
                color: #666;
            }
            
            /* ÌÖåÏù¥Î∏î */
            .table-container {
                overflow-x: auto;
            }
            
            .applications-table {
                width: 100%;
                border-collapse: collapse;
            }
            
            .applications-table thead {
                background: #f9f9f9;
            }
            
            .applications-table th {
                padding: 15px;
                text-align: left;
                font-weight: 600;
                color: #232f3e;
                border-bottom: 2px solid #e0e0e0;
            }
            
            .applications-table td {
                padding: 15px;
                border-bottom: 1px solid #f0f0f0;
                vertical-align: top;
            }
            
            .applications-table tbody tr:hover {
                background: #f9f9f9;
            }
            
            /* ÏÉÅÌÉú Î±ÉÏßÄ */
            .status-badge {
                display: inline-block;
                padding: 6px 12px;
                border-radius: 20px;
                font-size: 13px;
                font-weight: 600;
            }
            
            .status-pending {
                background: #fff3cd;
                color: #856404;
            }
            
            .status-approved {
                background: #d4edda;
                color: #155724;
            }
            
            .status-rejected {
                background: #f8d7da;
                color: #721c24;
            }
            
            /* Î≤ÑÌäº */
            .btn {
                padding: 8px 16px;
                border-radius: 6px;
                font-size: 14px;
                font-weight: 600;
                border: none;
                cursor: pointer;
                transition: all 0.3s;
                text-decoration: none;
                display: inline-block;
            }
            
            .btn-approve {
                background: #28a745;
                color: #fff;
            }
            
            .btn-approve:hover {
                background: #218838;
            }
            
            .btn-reject {
                background: #dc3545;
                color: #fff;
            }
            
            .btn-reject:hover {
                background: #c82333;
            }
            
            .btn-group {
                display: flex;
                gap: 10px;
            }
            
            /* Îπà ÏÉÅÌÉú */
            .empty-state {
                text-align: center;
                padding: 60px 20px;
                color: #999;
            }
            
            .empty-icon {
                font-size: 60px;
                margin-bottom: 15px;
            }
            
            .empty-text {
                font-size: 16px;
            }
            
            /* ÏÉÅÏÑ∏ Ï†ïÎ≥¥ */
            .detail-grid {
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
                font-size: 13px;
                margin-top: 10px;
            }
            
            .detail-item {
                color: #666;
            }
            
            .detail-label {
                font-weight: 600;
                color: #333;
            }
            
            /* Î™®Îã¨ */
            .modal {
                display: none;
                position: fixed;
                z-index: 1000;
                left: 0;
                top: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.5);
            }
            
            .modal-content {
                background: #fff;
                margin: 15% auto;
                padding: 30px;
                border-radius: 12px;
                width: 90%;
                max-width: 500px;
            }
            
            .modal-header {
                font-size: 20px;
                font-weight: 700;
                margin-bottom: 20px;
            }
            
            .modal-body {
                margin-bottom: 20px;
            }
            
            .modal-footer {
                display: flex;
                gap: 10px;
                justify-content: flex-end;
            }
            
            .form-input {
                width: 100%;
                padding: 10px;
                border: 1px solid #ddd;
                border-radius: 6px;
                font-size: 14px;
            }
            
            @media (max-width: 768px) {
                .stats-grid {
                    grid-template-columns: 1fr;
                }
                
                .detail-grid {
                    grid-template-columns: 1fr;
                }
            }
        </style>
    </th:block>
</head>
<body>
    <main layout:fragment="content">
        <div class="management-container">
            <!-- ÌéòÏù¥ÏßÄ Ìó§Îçî -->
            <div class="page-header">
                <h1 class="page-title">üè™ ÌåêÎß§Ïûê Ïã†Ï≤≠ Í¥ÄÎ¶¨</h1>
                <p class="page-subtitle">ÌåêÎß§Ïûê Ïã†Ï≤≠ÏùÑ ÏäπÏù∏ÌïòÍ±∞ÎÇò Í±∞Î∂ÄÌï† Ïàò ÏûàÏäµÎãàÎã§</p>
            </div>
            
            <!-- ÏÑ±Í≥µ/ÏóêÎü¨ Î©îÏãúÏßÄ -->
            <div th:if="${message}" class="alert alert-success">
                <i class="fas fa-check-circle"></i> <span th:text="${message}"></span>
            </div>
            
            <div th:if="${error}" class="alert alert-error">
                <i class="fas fa-exclamation-circle"></i> <span th:text="${error}"></span>
            </div>
            
            <!-- ÌÜµÍ≥Ñ -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-label">ÏäπÏù∏ ÎåÄÍ∏∞</div>
                    <div class="stat-value stat-pending" th:text="${pendingApplications.size()}">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Ï†ÑÏ≤¥ Ïã†Ï≤≠</div>
                    <div class="stat-value" th:text="${allApplications.size()}">0</div>
                </div>
            </div>
            
            <!-- ÏäπÏù∏ ÎåÄÍ∏∞ Ï§ëÏù∏ Ïã†Ï≤≠ -->
            <div class="section">
                <div class="section-header">
                    <h2 class="section-title">‚è≥ ÏäπÏù∏ ÎåÄÍ∏∞ Ï§ë</h2>
                    <span class="section-count" th:text="${pendingApplications.size()} + 'Í±¥'">0Í±¥</span>
                </div>
                
                <div th:if="${!pendingApplications.isEmpty()}" class="table-container">
                    <table class="applications-table">
                        <thead>
                            <tr>
                                <th>Ïã†Ï≤≠Ïùº</th>
                                <th>Ïã†Ï≤≠Ïûê</th>
                                <th>ÏÇ¨ÏóÖÏûê Ï†ïÎ≥¥</th>
                                <th>Ïπ¥ÌÖåÍ≥†Î¶¨</th>
                                <th>ÏÉÅÌÉú</th>
                                <th>Ï≤òÎ¶¨</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr th:each="app : ${pendingApplications}">
                                <td th:text="${#temporals.format(app.appliedDate, 'yyyy-MM-dd HH:mm')}">2024-12-30</td>
                                <td>
                                    <div style="font-weight: 600;" th:text="${app.memberName}">ÌôçÍ∏∏Îèô</div>
                                    <div style="font-size: 13px; color: #666;" th:text="${app.memberEmail}">email@example.com</div>
                                </td>
                                <td>
                                    <div><strong th:text="${app.businessName}">ÏÉÅÌò∏Î™Ö</strong></div>
                                    <div class="detail-grid">
                                        <div class="detail-item">
                                            <span class="detail-label">Î≤àÌò∏:</span> <span th:text="${app.businessNumber}">123-45-67890</span>
                                        </div>
                                        <div class="detail-item">
                                            <span class="detail-label">ÎåÄÌëú:</span> <span th:text="${app.representativeName}">ÎåÄÌëúÏûê</span>
                                        </div>
                                        <div class="detail-item">
                                            <span class="detail-label">Ïó∞ÎùΩÏ≤ò:</span> <span th:text="${app.phone}">010-1234-5678</span>
                                        </div>
                                    </div>
                                </td>
                                <td th:text="${app.category}">Ï†ÑÏûêÏ†úÌíà</td>
                                <td>
                                    <span class="status-badge status-pending" th:text="${app.statusDescription}">ÏäπÏù∏ ÎåÄÍ∏∞</span>
                                </td>
                                <td>
                                    <div class="btn-group">
                                        <form th:action="@{/admin/sellers/{id}/approve(id=${app.id})}" method="post" style="display: inline;">
                                            <button type="submit" class="btn btn-approve" 
                                                    onclick="return confirm('Ïù¥ Ïã†Ï≤≠ÏùÑ ÏäπÏù∏ÌïòÏãúÍ≤†ÏäµÎãàÍπå?\nÏäπÏù∏ Ïãú ÌåêÎß§Ïûê Í∂åÌïúÏù¥ Î∂ÄÏó¨Îê©ÎãàÎã§.')">
                                                <i class="fas fa-check"></i> ÏäπÏù∏
                                            </button>
                                        </form>
                                        <button type="button" class="btn btn-reject" 
                                                th:onclick="'showRejectModal(' + ${app.id} + ')'">
                                            <i class="fas fa-times"></i> Í±∞Î∂Ä
                                        </button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div th:if="${pendingApplications.isEmpty()}" class="empty-state">
                    <div class="empty-icon">
                        <i class="fas fa-inbox"></i>
                    </div>
                    <p class="empty-text">ÏäπÏù∏ ÎåÄÍ∏∞ Ï§ëÏù∏ Ïã†Ï≤≠Ïù¥ ÏóÜÏäµÎãàÎã§</p>
                </div>
            </div>
            
            <!-- Ï†ÑÏ≤¥ Ïã†Ï≤≠ ÎÇ¥Ïó≠ -->
            <div class="section">
                <div class="section-header">
                    <h2 class="section-title">üìã Ï†ÑÏ≤¥ Ïã†Ï≤≠ ÎÇ¥Ïó≠</h2>
                    <span class="section-count" th:text="${allApplications.size()} + 'Í±¥'">0Í±¥</span>
                </div>
                
                <div th:if="${!allApplications.isEmpty()}" class="table-container">
                    <table class="applications-table">
                        <thead>
                            <tr>
                                <th>Ïã†Ï≤≠Ïùº</th>
                                <th>Ïã†Ï≤≠Ïûê</th>
                                <th>ÏÇ¨ÏóÖÏûê Ï†ïÎ≥¥</th>
                                <th>Ïπ¥ÌÖåÍ≥†Î¶¨</th>
                                <th>ÏÉÅÌÉú</th>
                                <th>Ï≤òÎ¶¨Ïùº</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr th:each="app : ${allApplications}">
                                <td th:text="${#temporals.format(app.appliedDate, 'yyyy-MM-dd HH:mm')}">2024-12-30</td>
                                <td>
                                    <div style="font-weight: 600;" th:text="${app.memberName}">ÌôçÍ∏∏Îèô</div>
                                    <div style="font-size: 13px; color: #666;" th:text="${app.memberEmail}">email@example.com</div>
                                </td>
                                <td>
                                    <div><strong th:text="${app.businessName}">ÏÉÅÌò∏Î™Ö</strong></div>
                                    <div style="font-size: 13px; color: #666;" th:text="${app.businessNumber}">123-45-67890</div>
                                </td>
                                <td th:text="${app.category}">Ï†ÑÏûêÏ†úÌíà</td>
                                <td>
                                    <span class="status-badge" 
                                          th:classappend="${'status-' + #strings.toLowerCase(app.status)}"
                                          th:text="${app.statusDescription}">ÏÉÅÌÉú</span>
                                </td>
                                <td>
                                    <span th:if="${app.processedDate != null}" 
                                          th:text="${#temporals.format(app.processedDate, 'yyyy-MM-dd')}">-</span>
                                    <span th:if="${app.processedDate == null}">-</span>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div th:if="${allApplications.isEmpty()}" class="empty-state">
                    <div class="empty-icon">
                        <i class="fas fa-inbox"></i>
                    </div>
                    <p class="empty-text">Ïã†Ï≤≠ ÎÇ¥Ïó≠Ïù¥ ÏóÜÏäµÎãàÎã§</p>
                </div>
            </div>
        </div>
        
        <!-- Í±∞Î∂Ä Î™®Îã¨ -->
        <div id="rejectModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <i class="fas fa-exclamation-triangle" style="color: #dc3545;"></i>
                    ÌåêÎß§Ïûê Ïã†Ï≤≠ Í±∞Î∂Ä
                </div>
                <form id="rejectForm" method="post">
                    <div class="modal-body">
                        <p style="margin-bottom: 15px;">Í±∞Î∂Ä ÏÇ¨Ïú†Î•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî (ÏÑ†ÌÉùÏÇ¨Ìï≠)</p>
                        <textarea name="reason" class="form-input" rows="4" 
                                  placeholder="Ïòà: ÏÇ¨ÏóÖÏûêÎì±Î°ùÎ≤àÌò∏ ÌôïÏù∏ Î∂àÍ∞Ä, ÏÑúÎ•ò ÎØ∏ÎπÑ Îì±"></textarea>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn" onclick="closeRejectModal()" 
                                style="background: #f0f0f0; color: #666;">Ï∑®ÏÜå</button>
                        <button type="submit" class="btn btn-reject">Í±∞Î∂Ä ÌôïÏ†ï</button>
                    </div>
                </form>
            </div>
        </div>
    </main>
    
    <th:block layout:fragment="script">
        <script>
            function showRejectModal(sellerId) {
                const modal = document.getElementById('rejectModal');
                const form = document.getElementById('rejectForm');
                form.action = '/admin/sellers/' + sellerId + '/reject';
                modal.style.display = 'block';
            }
            
            function closeRejectModal() {
                const modal = document.getElementById('rejectModal');
                modal.style.display = 'none';
            }
            
            // Î™®Îã¨ Ïô∏Î∂Ä ÌÅ¥Î¶≠Ïãú Îã´Í∏∞
            window.onclick = function(event) {
                const modal = document.getElementById('rejectModal');
                if (event.target == modal) {
                    closeRejectModal();
                }
            }
        </script>
    </th:block>
</body>
</html>
