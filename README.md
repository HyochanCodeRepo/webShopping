# ğŸ›’ webShopping (ì‡¼í•‘ëª°)

> **ì•„ì›ƒë„ì–´ ì „ë¬¸ ì‡¼í•‘ëª° í”Œë«í¼ ğŸš§ ì§„í–‰ ì¤‘**  
> ìƒí’ˆ ê´€ë¦¬ë¶€í„° ì£¼ë¬¸/ê²°ì œ ì‹œìŠ¤í…œê¹Œì§€ ë‹¨ê³„ì ìœ¼ë¡œ êµ¬í˜„í•˜ëŠ” E-commerce í”„ë¡œì íŠ¸!

<br>

## ğŸ“– ëª©ì°¨
1. [í”„ë¡œì íŠ¸ ì†Œê°œ](#-í”„ë¡œì íŠ¸-ì†Œê°œ)
2. [ì£¼ìš” ê¸°ëŠ¥](#-ì£¼ìš”-ê¸°ëŠ¥)
3. [í™”ë©´ êµ¬ì„±](#-í™”ë©´-êµ¬ì„±)
4. [ê¸°ìˆ  ìŠ¤íƒ](#ï¸-ê¸°ìˆ -ìŠ¤íƒ)
5. [í”„ë¡œì íŠ¸ êµ¬ì¡°](#-í”„ë¡œì íŠ¸-êµ¬ì¡°)
6. [í•µì‹¬ êµ¬í˜„ ì‚¬í•­](#-í•µì‹¬-êµ¬í˜„-ì‚¬í•­)
7. [íŠ¸ëŸ¬ë¸”ìŠˆíŒ…](#-íŠ¸ëŸ¬ë¸”ìŠˆíŒ…)
8. [ê°œë°œ ê³¼ì • ë° ëŠë‚€ ì ](#-ê°œë°œ-ê³¼ì •-ë°-ëŠë‚€-ì )

<br>

---

## âœ¨ í”„ë¡œì íŠ¸ ì†Œê°œ

### ğŸ“Œ ê°œìš”
- **í”„ë¡œì íŠ¸ëª…**: webShopping (ì•„ì›ƒë„ì–´ ì‡¼í•‘ëª°)
- **ê°œë°œ ê¸°ê°„**: 2024.11 ~ ì§„í–‰ ì¤‘ âš™ï¸
- **ê°œë°œ ì¸ì›**: 1ëª… (ê°œì¸ í”„ë¡œì íŠ¸)
- **ê°œë°œ ìƒíƒœ**: ğŸš§ **ì§€ì† ê°œë°œ ì¤‘** - ìƒí’ˆ ê´€ë¦¬ ì™„ë£Œ, ì£¼ë¬¸/ê²°ì œ ì‹œìŠ¤í…œ êµ¬í˜„ ì˜ˆì •
- **í”„ë¡œì íŠ¸ ëª©ì **: 
  - ì‹¤ë¬´ ìˆ˜ì¤€ì˜ ì‡¼í•‘ëª° í”Œë«í¼ êµ¬ì¶• ê²½í—˜
  - Spring Boot & JPA ê¸°ë°˜ ìƒí’ˆ ê´€ë¦¬ ì‹œìŠ¤í…œ ê°œë°œ
  - ë‹¤ì¤‘ ì´ë¯¸ì§€ ì—…ë¡œë“œ ë° íŒŒì¼ ê´€ë¦¬ ì‹œìŠ¤í…œ êµ¬í˜„
  - ì™„ì „í•œ E-commerce í”Œë«í¼ìœ¼ë¡œ í™•ì¥

### ğŸ¯ ê¸°íš ë°°ê²½
ì‹¤ì œ ìš´ì˜ ê°€ëŠ¥í•œ E-commerce í”Œë«í¼ì„ ë‹¨ê³„ì ìœ¼ë¡œ êµ¬ì¶•í•˜ë©° Spring Boot ì‹¤ë¬´ ì—­ëŸ‰ì„ ê°•í™”í•˜ê³ ì ì‹œì‘í•œ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤.

**âœ… í˜„ì¬ ì™„ë£Œëœ ê¸°ëŠ¥:**
- ìƒí’ˆ ë“±ë¡/ì¡°íšŒ/ìˆ˜ì •/ì‚­ì œ (CRUD)
- ë‹¤ì¤‘ ì´ë¯¸ì§€ ì—…ë¡œë“œ ì‹œìŠ¤í…œ (ëŒ€í‘œ ì´ë¯¸ì§€ + ìƒì„¸ ì´ë¯¸ì§€ ìµœëŒ€ 5ê°œ)
- ì¹´í…Œê³ ë¦¬ë³„ ìƒí’ˆ ë¶„ë¥˜ ë° í•„í„°ë§
- í• ì¸ìœ¨ ìë™ ê³„ì‚° ë° ì‹¤ì‹œê°„ ê°€ê²© í‘œì‹œ
- Spring Security ê¸°ë°˜ íšŒì› ì¸ì¦/ì¸ê°€

**ğŸš€ ì§„í–‰ ì˜ˆì • ê¸°ëŠ¥:**
- ì¥ë°”êµ¬ë‹ˆ ì‹œìŠ¤í…œ (Session ê¸°ë°˜ â†’ Redis ì „í™˜ ì˜ˆì •)
- ì£¼ë¬¸/ê²°ì œ ì‹œìŠ¤í…œ (PortOne API ì—°ë™)
- ìƒí’ˆ ê²€ìƒ‰ ê¸°ëŠ¥ (í‚¤ì›Œë“œ ê²€ìƒ‰, ê°€ê²©/ì¹´í…Œê³ ë¦¬ í•„í„°ë§)
- ì£¼ë¬¸ ë‚´ì—­ ì¡°íšŒ ë° ë°°ì†¡ ì¶”ì 
- AWS S3 ì´ë¯¸ì§€ ì—…ë¡œë“œ ì „í™˜

<br>

---

## âœ¨ ì£¼ìš” ê¸°ëŠ¥

### ğŸ‘¥ **1. íšŒì› ê´€ë¦¬**
- **íšŒì›ê°€ì… / ë¡œê·¸ì¸**: Spring Security ê¸°ë°˜ ì¸ì¦
- **ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´**: ADMIN, USER ê¶Œí•œ ë¶„ë¦¬

### ğŸ“¦ **2. ìƒí’ˆ ê´€ë¦¬ (ê´€ë¦¬ì)**
- **ìƒí’ˆ ë“±ë¡**: 
  - ëŒ€í‘œ ì´ë¯¸ì§€ 1ê°œ + ìƒì„¸ ì´ë¯¸ì§€ ìµœëŒ€ 5ê°œ ì—…ë¡œë“œ
  - ì¹´í…Œê³ ë¦¬, ê°€ê²©, ì¬ê³ , í• ì¸ìœ¨ ì„¤ì •
  - ìƒí’ˆ ì„¤ëª… HTML ì—ë””í„° ì§€ì›
- **ìƒí’ˆ ìˆ˜ì •**: 
  - ê¸°ì¡´ ì´ë¯¸ì§€ ìœ ì§€/ì‚­ì œ ì„ íƒ ê°€ëŠ¥
  - ì´ë¯¸ì§€ ìˆœì„œ ë³€ê²½ ì§€ì›
  - ì‹¤ì‹œê°„ í• ì¸ê°€ ë¯¸ë¦¬ë³´ê¸°
- **ìƒí’ˆ ì‚­ì œ**: 
  - Cascade ì‚­ì œë¡œ ì—°ê´€ ì´ë¯¸ì§€ ìë™ ì‚­ì œ
  - ì•ˆì „í•œ íŒŒì¼ ì‹œìŠ¤í…œ ì •ë¦¬

### ğŸ›ï¸ **3. ìƒí’ˆ ì¡°íšŒ (ì‚¬ìš©ì)**
- **ì¹´í…Œê³ ë¦¬ë³„ ìƒí’ˆ ëª©ë¡**: 
  - í•˜ì´í‚¹, ìº í•‘, ë‚šì‹œ, ëŸ¬ë‹, ì‚¬ì´í´ë§ ë“±
  - ëŒ€í‘œ ì´ë¯¸ì§€ ì¸ë„¤ì¼ í‘œì‹œ
  - í• ì¸ê°€ ìë™ ê³„ì‚° ë° í‘œì‹œ
- **ìƒí’ˆ ìƒì„¸ í˜ì´ì§€**: 
  - ëŒ€í‘œ ì´ë¯¸ì§€ í¬ê²Œ í‘œì‹œ
  - ìƒì„¸ ì´ë¯¸ì§€ ê°¤ëŸ¬ë¦¬ í˜•ì‹ ë‚˜ì—´
  - ì¬ê³  ìƒíƒœ ì‹¤ì‹œê°„ í‘œì‹œ

### ğŸ’° **4. í• ì¸ ì‹œìŠ¤í…œ**
- **í• ì¸ìœ¨ ì ìš©**: 
  - ì›ê°€ ëŒ€ë¹„ í• ì¸ìœ¨ ìë™ ê³„ì‚°
  - í• ì¸ê°€ ì‹¤ì‹œê°„ í‘œì‹œ
  - í• ì¸ìœ¨ 0% ì‹œ ì •ìƒê°€ í‘œì‹œ

### ğŸ–¼ï¸ **5. ë‹¤ì¤‘ ì´ë¯¸ì§€ ê´€ë¦¬**
- **ëŒ€í‘œ ì´ë¯¸ì§€ (RepImg)**: 
  - `repImgYn = 'Y'` í”Œë˜ê·¸ë¡œ êµ¬ë¶„
  - ëª©ë¡ í˜ì´ì§€ ì¸ë„¤ì¼ìš©
- **ìƒì„¸ ì´ë¯¸ì§€**: 
  - `imageOrder` í•„ë“œë¡œ ìˆœì„œ ê´€ë¦¬
  - ìµœëŒ€ 5ê°œê¹Œì§€ ì—…ë¡œë“œ
  - ìƒí’ˆ ìƒì„¸ í˜ì´ì§€ ê°¤ëŸ¬ë¦¬ í‘œì‹œ

<br>

---

## ğŸ“¸ í™”ë©´ êµ¬ì„±

### ğŸ” **ë¡œê·¸ì¸ í˜ì´ì§€**
> Spring Security ê¸°ë°˜ ì¸ì¦

![ë¡œê·¸ì¸](docs/login-page.png)

<br>

### ğŸ“ **íšŒì›ê°€ì… í˜ì´ì§€**
> ì‹ ê·œ íšŒì› ë“±ë¡

![íšŒì›ê°€ì…](docs/members-register-page.png)

<br>

### ğŸ  **ë©”ì¸ í˜ì´ì§€**
> ì¹´í…Œê³ ë¦¬ë³„ ìƒí’ˆ ì§„ì…

![ë©”ì¸ í˜ì´ì§€](docs/main-page.png)

<br>

### ğŸ›ï¸ **ìƒí’ˆ ëª©ë¡ í˜ì´ì§€**
> ì¹´í…Œê³ ë¦¬ë³„ ìƒí’ˆ ëª©ë¡ ë° í• ì¸ê°€ í‘œì‹œ

![ìƒí’ˆ ëª©ë¡](docs/product-list-page.png)

<br>

### âœï¸ **ìƒí’ˆ ë“±ë¡ í˜ì´ì§€ (ê´€ë¦¬ì)**
> ë‹¤ì¤‘ ì´ë¯¸ì§€ ì—…ë¡œë“œ ë° ìƒí’ˆ ì •ë³´ ì…ë ¥

![ìƒí’ˆ ë“±ë¡](docs/product-register-page.png)

<br>

---

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

### **Backend**
![Java](https://img.shields.io/badge/Java_17-ED8B00?style=for-the-badge&logo=openjdk&logoColor=white)
![Spring Boot](https://img.shields.io/badge/Spring_Boot_3.5.3-6DB33F?style=for-the-badge&logo=springboot&logoColor=white)
![Spring Security](https://img.shields.io/badge/Spring_Security-6DB33F?style=for-the-badge&logo=springsecurity&logoColor=white)
![Spring Data JPA](https://img.shields.io/badge/Spring_Data_JPA-6DB33F?style=for-the-badge&logo=spring&logoColor=white)

### **Frontend**
![HTML5](https://img.shields.io/badge/HTML5-E34F26?style=for-the-badge&logo=html5&logoColor=white)
![CSS3](https://img.shields.io/badge/CSS3-1572B6?style=for-the-badge&logo=css3&logoColor=white)
![JavaScript](https://img.shields.io/badge/JavaScript-F7DF1E?style=for-the-badge&logo=javascript&logoColor=black)
![Thymeleaf](https://img.shields.io/badge/Thymeleaf-005F0F?style=for-the-badge&logo=thymeleaf&logoColor=white)

### **Database**
![MariaDB](https://img.shields.io/badge/MariaDB-003545?style=for-the-badge&logo=mariadb&logoColor=white)

### **Build Tool**
![Gradle](https://img.shields.io/badge/Gradle-02303A?style=for-the-badge&logo=gradle&logoColor=white)

### **Version Control**
![Git](https://img.shields.io/badge/Git-F05032?style=for-the-badge&logo=git&logoColor=white)
![GitHub](https://img.shields.io/badge/GitHub-181717?style=for-the-badge&logo=github&logoColor=white)

<br>

---

## ğŸ“‚ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
webShopping/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main/
â”‚   â”‚   â”œâ”€â”€ java/com/example/webshopping/
â”‚   â”‚   â”‚   â”œâ”€â”€ config/              # Spring Security, íŒŒì¼ ì—…ë¡œë“œ ì„¤ì •
â”‚   â”‚   â”‚   â”œâ”€â”€ constant/            # Role ë“± ìƒìˆ˜ ì •ì˜
â”‚   â”‚   â”‚   â”œâ”€â”€ controller/          # MVC ì»¨íŠ¸ë¡¤ëŸ¬
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ MainController.java
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProductController.java
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ MembersController.java
â”‚   â”‚   â”‚   â”œâ”€â”€ dto/                 # ë°ì´í„° ì „ì†¡ ê°ì²´
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ProductDTO.java
â”‚   â”‚   â”‚   â”œâ”€â”€ entity/              # JPA ì—”í‹°í‹°
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Product.java         # ìƒí’ˆ ì—”í‹°í‹°
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProductImage.java    # ìƒí’ˆ ì´ë¯¸ì§€ ì—”í‹°í‹°
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Category.java        # ì¹´í…Œê³ ë¦¬ ì—”í‹°í‹°
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Members.java         # íšŒì› ì—”í‹°í‹°
â”‚   â”‚   â”‚   â”œâ”€â”€ repository/          # Spring Data JPA ë¦¬í¬ì§€í† ë¦¬
â”‚   â”‚   â”‚   â”œâ”€â”€ service/             # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProductService.java
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ FileService.java
â”‚   â”‚   â”‚   â””â”€â”€ WebShoppingApplication.java
â”‚   â”‚   â””â”€â”€ resources/
â”‚   â”‚       â”œâ”€â”€ templates/           # Thymeleaf í…œí”Œë¦¿
â”‚   â”‚       â”‚   â”œâ”€â”€ main.html
â”‚   â”‚       â”‚   â”œâ”€â”€ layout/
â”‚   â”‚       â”‚   â”œâ”€â”€ members/
â”‚   â”‚       â”‚   â””â”€â”€ product/
â”‚   â”‚       â”‚       â”œâ”€â”€ form.html        # ìƒí’ˆ ë“±ë¡/ìˆ˜ì • í¼
â”‚   â”‚       â”‚       â”œâ”€â”€ list.html        # ìƒí’ˆ ëª©ë¡
â”‚   â”‚       â”‚       â””â”€â”€ detail.html      # ìƒí’ˆ ìƒì„¸
â”‚   â”‚       â”œâ”€â”€ static/              # CSS, JS, ì´ë¯¸ì§€
â”‚   â”‚       â””â”€â”€ application.properties
â”‚   â””â”€â”€ test/                        # í…ŒìŠ¤íŠ¸ ì½”ë“œ
â””â”€â”€ build.gradle
```

<br>

---

## ğŸ”¥ í•µì‹¬ êµ¬í˜„ ì‚¬í•­

### 1ï¸âƒ£ **ë‹¤ì¤‘ ì´ë¯¸ì§€ ì—…ë¡œë“œ ì‹œìŠ¤í…œ**

#### ğŸ“Œ **ProductImage ì—”í‹°í‹° ì„¤ê³„**
```java
@Entity
public class ProductImage {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "product_id")
    private Product product;
    
    private String imageUrl;        // ì´ë¯¸ì§€ ì €ì¥ ê²½ë¡œ
    private String repImgYn;        // ëŒ€í‘œ ì´ë¯¸ì§€ ì—¬ë¶€ (Y/N)
    private Integer imageOrder;     // ì´ë¯¸ì§€ ìˆœì„œ
}
```

#### ğŸ“Œ **Product ì—”í‹°í‹°ì˜ ì´ë¯¸ì§€ ê´€ë¦¬ ë©”ì„œë“œ**
```java
@Entity
public class Product {
    @OneToMany(mappedBy = "product", cascade = CascadeType.ALL, orphanRemoval = true)
    @OrderBy("imageOrder ASC")
    private List<ProductImage> images = new ArrayList<>();
    
    // ëŒ€í‘œ ì´ë¯¸ì§€ URL ì¡°íšŒ
    public String getRepImageUrl() {
        return images.stream()
                .filter(img -> "Y".equals(img.getRepImgYn()))
                .findFirst()
                .map(ProductImage::getImageUrl)
                .orElse(null);
    }
    
    // ìƒì„¸ ì´ë¯¸ì§€ URL ë¦¬ìŠ¤íŠ¸ ì¡°íšŒ (ìˆœì„œëŒ€ë¡œ)
    public List<String> getDetailImageUrls() {
        return images.stream()
                .filter(img -> "N".equals(img.getRepImgYn()))
                .sorted(Comparator.comparing(ProductImage::getImageOrder))
                .map(ProductImage::getImageUrl)
                .collect(Collectors.toList());
    }
    
    // ì´ë¯¸ì§€ ì¶”ê°€ (ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ ì„¤ì •)
    public void addImage(ProductImage image) {
        images.add(image);
        image.setProduct(this);
    }
}
```

<br>

### 2ï¸âƒ£ **íŒŒì¼ ì—…ë¡œë“œ ì„œë¹„ìŠ¤**

#### ğŸ“Œ **FileService êµ¬í˜„**
```java
@Service
public class FileService {
    @Value("${file.upload-dir}")
    private String uploadDir;
    
    public String uploadFile(MultipartFile file) {
        // ì›ë³¸ íŒŒì¼ëª…
        String originalFilename = file.getOriginalFilename();
        
        // UUIDë¡œ ê³ ìœ í•œ íŒŒì¼ëª… ìƒì„±
        String savedFilename = UUID.randomUUID() + "_" + originalFilename;
        
        // íŒŒì¼ ì €ì¥ ê²½ë¡œ
        Path filePath = Paths.get(uploadDir, savedFilename);
        
        // íŒŒì¼ ì €ì¥
        Files.copy(file.getInputStream(), filePath, StandardCopyOption.REPLACE_EXISTING);
        
        return "/uploads/" + savedFilename;
    }
}
```

#### ğŸ“Œ **ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ë‹¤ì¤‘ íŒŒì¼ ì²˜ë¦¬**
```java
@PostMapping("/register")
public String register(ProductDTO productDTO,
                       @RequestParam(required = false) MultipartFile mainImageFile,
                       @RequestParam(required = false) List<MultipartFile> detailImageFiles) {
    
    List<String> imageUrls = new ArrayList<>();
    
    // ëŒ€í‘œ ì´ë¯¸ì§€ ì €ì¥
    if (mainImageFile != null && !mainImageFile.isEmpty()) {
        String mainUrl = fileService.uploadFile(mainImageFile);
        imageUrls.add(mainUrl);
    }
    
    // ìƒì„¸ ì´ë¯¸ì§€ ì €ì¥
    if (detailImageFiles != null && !detailImageFiles.isEmpty()) {
        for (MultipartFile file : detailImageFiles) {
            if (!file.isEmpty()) {
                String url = fileService.uploadFile(file);
                imageUrls.add(url);
            }
        }
    }
    
    // ì„œë¹„ìŠ¤ í˜¸ì¶œ
    productService.create(productDTO, imageUrls);
    
    return "redirect:/product/register";
}
```

<br>

### 3ï¸âƒ£ **í• ì¸ê°€ ìë™ ê³„ì‚°**

#### ğŸ“Œ **Product ì—”í‹°í‹°ì˜ í• ì¸ ë¡œì§**
```java
@Entity
public class Product {
    private Integer price;           // ì›ê°€
    private Integer discountRate;    // í• ì¸ìœ¨ (%)
    
    // í• ì¸ê°€ ê³„ì‚° ë©”ì„œë“œ
    public Integer getDiscountPrice() {
        if (discountRate != null && discountRate > 0) {
            return price - (price * discountRate / 100);
        }
        return price;
    }
}
```

#### ğŸ“Œ **Thymeleaf í…œí”Œë¦¿ì—ì„œ í• ì¸ê°€ í‘œì‹œ**
```html
<!-- í• ì¸ìœ¨ì´ ìˆëŠ” ê²½ìš° -->
<div th:if="${product.discountRate != null and product.discountRate > 0}">
    <span class="original-price" th:text="${product.price} + 'ì›'">10,000ì›</span>
    <span class="discount-rate" th:text="${product.discountRate} + '%'">10%</span>
    <span class="discount-price" th:text="${product.discountPrice} + 'ì›'">9,000ì›</span>
</div>

<!-- í• ì¸ìœ¨ì´ ì—†ëŠ” ê²½ìš° -->
<div th:unless="${product.discountRate != null and product.discountRate > 0}">
    <span class="price" th:text="${product.price} + 'ì›'">10,000ì›</span>
</div>
```

<br>

### 4ï¸âƒ£ **Cascade ì—°ê´€ê´€ê³„ ê´€ë¦¬**

#### ğŸ“Œ **Product ì‚­ì œ ì‹œ ì´ë¯¸ì§€ ìë™ ì‚­ì œ**
```java
@Entity
public class Product {
    @OneToMany(mappedBy = "product", 
               cascade = CascadeType.ALL,  // ëª¨ë“  ì˜ì†ì„± ì „ì´
               orphanRemoval = true)        // ê³ ì•„ ê°ì²´ ìë™ ì‚­ì œ
    private List<ProductImage> images = new ArrayList<>();
}
```

#### ğŸ“Œ **ìƒí’ˆ ìˆ˜ì • ì‹œ ì´ë¯¸ì§€ ì—…ë°ì´íŠ¸**
```java
@Service
public class ProductService {
    @Transactional
    public void update(Long id, ProductDTO dto, 
                      MultipartFile mainImage, 
                      List<MultipartFile> detailImages,
                      Boolean keepMainImage) {
        
        Product product = productRepository.findById(id)
            .orElseThrow(() -> new EntityNotFoundException("ìƒí’ˆ ì—†ìŒ"));
        
        // ê¸°ë³¸ ì •ë³´ ì—…ë°ì´íŠ¸
        product.setProductName(dto.getProductName());
        product.setPrice(dto.getPrice());
        
        // ëŒ€í‘œ ì´ë¯¸ì§€ êµì²´ (ê¸°ì¡´ ì‚­ì œ ì•ˆ í•¨)
        if (!keepMainImage && mainImage != null && !mainImage.isEmpty()) {
            // ê¸°ì¡´ ëŒ€í‘œ ì´ë¯¸ì§€ ì°¾ì•„ì„œ ì—…ë°ì´íŠ¸
            product.getImages().stream()
                .filter(img -> "Y".equals(img.getRepImgYn()))
                .findFirst()
                .ifPresent(img -> {
                    String newUrl = fileService.uploadFile(mainImage);
                    img.setImageUrl(newUrl);
                });
        }
        
        // ìƒì„¸ ì´ë¯¸ì§€ ì¶”ê°€
        if (detailImages != null && !detailImages.isEmpty()) {
            int currentOrder = product.getImages().size();
            for (MultipartFile file : detailImages) {
                if (!file.isEmpty()) {
                    String url = fileService.uploadFile(file);
                    ProductImage newImage = ProductImage.builder()
                        .imageUrl(url)
                        .repImgYn("N")
                        .imageOrder(currentOrder++)
                        .build();
                    product.addImage(newImage);
                }
            }
        }
        
        productRepository.save(product);
    }
}
```

<br>

---

## ğŸš§ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### 1ï¸âƒ£ **ë¬¸ì œ: ì´ë¯¸ì§€ ì—…ë¡œë“œ ì‹œ íŒŒì¼ ê²½ë¡œ ì„¤ì • ì˜¤ë¥˜**

#### ğŸ”´ **ë°œìƒ ì›ì¸**
```java
// ë¬¸ì œê°€ ëœ ì½”ë“œ
@Value("${file.upload-dir}")
private String uploadDir = "uploads/"; // application.properties ì„¤ì • ë¬´ì‹œë¨
```

#### âœ… **í•´ê²° ë°©ë²•**
```java
// ìˆ˜ì •ëœ ì½”ë“œ
@Value("${file.upload-dir}")
private String uploadDir; // ê¸°ë³¸ê°’ ì œê±°

// application.properties
file.upload-dir=C:/uploads/products
```

#### ğŸ“Œ **ë°°ìš´ ì **
- `@Value`ë¡œ ì£¼ì…ë°›ëŠ” í•„ë“œëŠ” ê¸°ë³¸ê°’ì„ ì„¤ì •í•˜ë©´ ì•ˆ ë¨
- íŒŒì¼ ê²½ë¡œëŠ” ì ˆëŒ€ ê²½ë¡œë¡œ ì„¤ì •í•˜ëŠ” ê²ƒì´ ì•ˆì „

<br>

### 2ï¸âƒ£ **ë¬¸ì œ: ìƒí’ˆ ìˆ˜ì • ì‹œ ì´ë¯¸ì§€ ì¤‘ë³µ ì—…ë¡œë“œ**

#### ğŸ”´ **ë°œìƒ ìƒí™©**
- ìƒí’ˆ ìˆ˜ì • ì‹œ ê¸°ì¡´ ì´ë¯¸ì§€ ìœ ì§€ ì˜µì…˜ì„ ì„ íƒí•´ë„ ìƒˆ ì´ë¯¸ì§€ê°€ ì¶”ê°€ë¡œ ì—…ë¡œë“œë¨
- `orphanRemoval = true` ë•Œë¬¸ì— ê¸°ì¡´ ì´ë¯¸ì§€ ì‚­ì œë¨

#### âœ… **í•´ê²° ë°©ë²•**
```java
// ê¸°ì¡´ ì´ë¯¸ì§€ ìœ ì§€ ì—¬ë¶€ íŒŒë¼ë¯¸í„° ì¶”ê°€
@PostMapping("/edit/{id}")
public String edit(...,
                   @RequestParam(required = false, defaultValue = "false") Boolean keepMainImage) {
    
    // ëŒ€í‘œ ì´ë¯¸ì§€ êµì²´ ë¡œì§
    if (!keepMainImage && mainImage != null && !mainImage.isEmpty()) {
        // ê¸°ì¡´ ì´ë¯¸ì§€ URLë§Œ ë³€ê²½ (ì—”í‹°í‹°ëŠ” ìœ ì§€)
        product.getImages().stream()
            .filter(img -> "Y".equals(img.getRepImgYn()))
            .findFirst()
            .ifPresent(img -> img.setImageUrl(newUrl));
    }
}
```

#### ğŸ“Œ **ë°°ìš´ ì **
- `orphanRemoval`ê³¼ `cascade`ì˜ ì°¨ì´ì  ëª…í™•íˆ ì´í•´
- ì´ë¯¸ì§€ êµì²´ ì‹œ URLë§Œ ë³€ê²½í•˜ëŠ” ê²ƒì´ íš¨ìœ¨ì 

<br>

### 3ï¸âƒ£ **ë¬¸ì œ: Thymeleafì—ì„œ í• ì¸ê°€ í‘œì‹œ ì‹œ null ì²˜ë¦¬**

#### ğŸ”´ **ë°œìƒ ì›ì¸**
```html
<!-- ë¬¸ì œê°€ ëœ ì½”ë“œ -->
<span th:text="${product.discountPrice} + 'ì›'">í• ì¸ê°€</span>
<!-- discountRateê°€ nullì¼ ë•Œ NPE ë°œìƒ -->
```

#### âœ… **í•´ê²° ë°©ë²•**
```java
// Product ì—”í‹°í‹°
public Integer getDiscountPrice() {
    if (discountRate != null && discountRate > 0) {  // null ì²´í¬ ì¶”ê°€
        return price - (price * discountRate / 100);
    }
    return price;
}
```

```html
<!-- Thymeleaf í…œí”Œë¦¿ -->
<div th:if="${product.discountRate != null and product.discountRate > 0}">
    <span class="discount-price" th:text="${product.discountPrice} + 'ì›'"></span>
</div>
```

#### ğŸ“Œ **ë°°ìš´ ì **
- ì—”í‹°í‹° ë©”ì„œë“œì—ì„œ null ì•ˆì „ì„± í™•ë³´ ì¤‘ìš”
- Thymeleafì˜ ì¡°ê±´ë¶€ ë Œë”ë§ í™œìš©

<br>

---

## ğŸ’¡ ê°œë°œ ê³¼ì • ë° ëŠë‚€ ì 

### ğŸ“š **ë°°ìš´ ì **
1. **ë‹¤ì¤‘ ì´ë¯¸ì§€ ì—…ë¡œë“œ ì‹œìŠ¤í…œ ì„¤ê³„**: 
   - ëŒ€í‘œ ì´ë¯¸ì§€ì™€ ìƒì„¸ ì´ë¯¸ì§€ë¥¼ êµ¬ë¶„í•˜ëŠ” ì„¤ê³„ ê²½í—˜
   - `repImgYn`, `imageOrder` í•„ë“œë¥¼ í™œìš©í•œ ìœ ì—°í•œ ì´ë¯¸ì§€ ê´€ë¦¬
   - ìƒí’ˆë³„ ìµœëŒ€ 6ê°œ ì´ë¯¸ì§€ ì—…ë¡œë“œ ë° ìˆœì„œ ê´€ë¦¬

2. **íŒŒì¼ ì—…ë¡œë“œ ë³´ì•ˆ & ìµœì í™”**: 
   - UUIDë¥¼ í™œìš©í•œ íŒŒì¼ëª… ì¤‘ë³µ ë°©ì§€
   - í—ˆìš©ëœ í™•ì¥ìë§Œ ì—…ë¡œë“œí•˜ë„ë¡ ê²€ì¦
   - íŒŒì¼ í¬ê¸° ì œí•œ ì„¤ì • (10MB)

3. **JPA Cascade ì‹¤ì „ í™œìš©**: 
   - `CascadeType.ALL`ê³¼ `orphanRemoval`ì˜ ì°¨ì´ì  ì²´ê°
   - ì—°ê´€ê´€ê³„ í¸ì˜ ë©”ì„œë“œì˜ ì¤‘ìš”ì„±
   - ìƒí’ˆ ì‚­ì œ ì‹œ ì—°ê´€ ì´ë¯¸ì§€ ìë™ ì •ë¦¬

4. **ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ë¶„ë¦¬**: 
   - í• ì¸ê°€ ê³„ì‚°ì„ ì—”í‹°í‹° ë©”ì„œë“œë¡œ ë¶„ë¦¬
   - Controller â†’ Service â†’ Repository ê³„ì¸µ ëª…í™•íˆ êµ¬ë¶„
   - DTOë¥¼ í™œìš©í•œ í™”ë©´-ì—”í‹°í‹° ë¶„ë¦¬

### ğŸš€ **í–¥í›„ ê°œë°œ ë°©í–¥**

#### **1ë‹¨ê³„: ì¥ë°”êµ¬ë‹ˆ & ì£¼ë¬¸ ì‹œìŠ¤í…œ (ì§„í–‰ ì˜ˆì •)**
```
âœ… êµ¬í˜„ ê³„íš:
- Session ê¸°ë°˜ ì¥ë°”êµ¬ë‹ˆ (ë¹„íšŒì› ì§€ì›)
- ì£¼ë¬¸ ì—”í‹°í‹° ì„¤ê³„ (Order, OrderItem)
- ì£¼ë¬¸ ìƒíƒœ ê´€ë¦¬ (ì£¼ë¬¸ì™„ë£Œ, ë°°ì†¡ì¤‘, ë°°ì†¡ì™„ë£Œ, ì·¨ì†Œ)
- ì¬ê³  ê´€ë¦¬ ì‹œìŠ¤í…œ (ì£¼ë¬¸ ì‹œ ì¬ê³  ì°¨ê°)
```

#### **2ë‹¨ê³„: ê²°ì œ ì‹œìŠ¤í…œ (ì§„í–‰ ì˜ˆì •)**
```
âœ… êµ¬í˜„ ê³„íš:
- PortOne(êµ¬ ì•„ì„í¬íŠ¸) API ì—°ë™
- ê²°ì œ ìˆ˜ë‹¨: ì¹´ë“œ, ê³„ì¢Œì´ì²´, ë¬´í†µì¥ì…ê¸ˆ
- ê²°ì œ ì‹¤íŒ¨/ì·¨ì†Œ ì²˜ë¦¬ ë¡œì§
- ê²°ì œ ë‚´ì—­ ì¡°íšŒ ë° ì˜ìˆ˜ì¦ ë°œí–‰
```

#### **3ë‹¨ê³„: ê²€ìƒ‰ & í•„í„°ë§ ê¸°ëŠ¥ (ì§„í–‰ ì˜ˆì •)**
```
âœ… êµ¬í˜„ ê³„íš:
- ìƒí’ˆëª… í‚¤ì›Œë“œ ê²€ìƒ‰ (QueryDSL í™œìš©)
- ê°€ê²©ëŒ€ë³„ í•„í„°ë§ (ìµœì†Œê°€ ~ ìµœëŒ€ê°€)
- ì¹´í…Œê³ ë¦¬ + ê²€ìƒ‰ì–´ ì¡°í•© ê²€ìƒ‰
- ì •ë ¬ ê¸°ëŠ¥ (ìµœì‹ ìˆœ, ê°€ê²©ìˆœ, ì¸ê¸°ìˆœ)
```

#### **4ë‹¨ê³„: ì¸í”„ë¼ ê°œì„  (ì§„í–‰ ì˜ˆì •)**
```
âœ… êµ¬í˜„ ê³„íš:
- AWS S3ë¡œ ì´ë¯¸ì§€ ì—…ë¡œë“œ ì „í™˜
- Redis Session ê´€ë¦¬ (ì¥ë°”êµ¬ë‹ˆ ì„±ëŠ¥ í–¥ìƒ)
- AWS RDS ë°ì´í„°ë² ì´ìŠ¤ ì „í™˜
- Docker ì»¨í…Œì´ë„ˆ ê¸°ë°˜ ë°°í¬
```

### ğŸ¯ **ì¥ê¸° ëª©í‘œ**
- **ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ**: íŒë§¤ í†µê³„, ì¬ê³  ê´€ë¦¬, ì£¼ë¬¸ í˜„í™©
- **ë¦¬ë·° ì‹œìŠ¤í…œ**: êµ¬ë§¤ í›„ ë¦¬ë·° ì‘ì„±, ë³„ì  í‰ê°€
- **ì¿ í° & í”„ë¡œëª¨ì…˜**: í• ì¸ ì¿ í°, ì´ë²¤íŠ¸ ë°°ë„ˆ ê´€ë¦¬
- **ì¶”ì²œ ì•Œê³ ë¦¬ì¦˜**: êµ¬ë§¤ ì´ë ¥ ê¸°ë°˜ ìƒí’ˆ ì¶”ì²œ

<br>

---

## ğŸ”— ê´€ë ¨ ë§í¬
- **GitHub Repository**: [https://github.com/yourusername/webShopping](https://github.com/yourusername/webShopping)
- **ì‹œì—° ì˜ìƒ**: (ì¶”ê°€ ì˜ˆì •)
- **ë°°í¬ URL**: (ì¶”ê°€ ì˜ˆì •)

<br>

---

## ğŸ“§ Contact
- **ì´ë©”ì¼**: hyochan.lee91@gmail.com

---

